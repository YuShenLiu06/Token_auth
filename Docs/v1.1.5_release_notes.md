# Tokenè®¤è¯ç³»ç»Ÿ v1.1.5 ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

## ğŸ¯ ç‰ˆæœ¬æ¦‚è¿°

v1.1.5ç‰ˆæœ¬æ˜¯Tokenè®¤è¯ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦æ›´æ–°ï¼Œä¸»è¦å¢å¼ºäº†å®‰å…¨ç›‘æ§å’Œè°ƒè¯•èƒ½åŠ›ï¼Œæ–°å¢äº†é‚®ä»¶è­¦æŠ¥ç³»ç»Ÿã€IPåœ°ç†ä½ç½®è¿½è¸ªã€CSVæ—¥å¿—è®°å½•å’Œè¯¦ç»†çš„è°ƒè¯•æ—¥å¿—åŠŸèƒ½ã€‚

## ğŸ†• æ–°å¢åŠŸèƒ½

### 1. é‚®ä»¶è­¦æŠ¥ç³»ç»Ÿ
- **æ–‡ä»¶**: [`EmailNotifier.java`](src/main/java/nety/ys/util/EmailNotifier.java), [`AuthAlertService.java`](src/main/java/nety/ys/server/AuthAlertService.java)
- **åŠŸèƒ½**: å½“ç©å®¶è®¤è¯å¤±è´¥æˆ–è¶…æ—¶æ—¶ï¼Œè‡ªåŠ¨å‘é€è­¦æŠ¥é‚®ä»¶ç»™ç®¡ç†å‘˜
- **ç‰¹æ€§**:
  - æ”¯æŒSMTPåè®®ï¼ŒåŒ…æ‹¬SSLåŠ å¯†
  - å¯é…ç½®å‘ä»¶äººã€æ”¶ä»¶äººã€SMTPæœåŠ¡å™¨ç­‰ä¿¡æ¯
  - åŒ…å«è¯¦ç»†çš„è®¤è¯å¤±è´¥ä¿¡æ¯ï¼šç©å®¶åã€IPåœ°å€ã€åœ°ç†ä½ç½®ã€å¤±è´¥åŸå› 
  - å¼‚æ­¥å‘é€ï¼Œä¸å½±å“æœåŠ¡å™¨æ€§èƒ½

### 2. IPåœ°ç†ä½ç½®è¿½è¸ª
- **æ–‡ä»¶**: [`IPGeolocationUtil.java`](src/main/java/nety/ys/util/IPGeolocationUtil.java)
- **åŠŸèƒ½**: è‡ªåŠ¨è·å–è®¤è¯å¤±è´¥ç©å®¶çš„IPåœ°ç†ä½ç½®ä¿¡æ¯
- **ç‰¹æ€§**:
  - ä½¿ç”¨ip-api.com APIè·å–åœ°ç†ä½ç½®
  - åŒ…å«å›½å®¶ã€åœ°åŒºã€åŸå¸‚ã€ISPç­‰ä¿¡æ¯
  - æ”¯æŒé‡è¯•æœºåˆ¶å’Œé”™è¯¯å¤„ç†
  - å¯é€šè¿‡é…ç½®å¯ç”¨/ç¦ç”¨

### 3. CSVæ—¥å¿—è®°å½•
- **æ–‡ä»¶**: [`FailedAuthLogger.java`](src/main/java/nety/ys/util/FailedAuthLogger.java)
- **åŠŸèƒ½**: å°†è®¤è¯å¤±è´¥è®°å½•ä¿å­˜åˆ°CSVæ–‡ä»¶
- **ç‰¹æ€§**:
  - è‡ªåŠ¨è®°å½•ç©å®¶åç§°ã€ç™»å½•æ—¶é—´ã€IPåœ°å€ã€åœ°ç†ä½ç½®
  - çº¿ç¨‹å®‰å…¨çš„æ–‡ä»¶å†™å…¥
  - å¯é…ç½®æ–‡ä»¶åå’Œè®°å½•å†…å®¹
  - æ”¯æŒè®°å½•è®¤è¯è¶…æ—¶äº‹ä»¶

### 4. è°ƒè¯•æ—¥å¿—ç³»ç»Ÿ
- **æ–‡ä»¶**: [`DebugLogger.java`](src/main/java/nety/ys/util/DebugLogger.java)
- **åŠŸèƒ½**: æä¾›åˆ†ç±»çš„è°ƒè¯•æ—¥å¿—è¾“å‡º
- **ç‰¹æ€§**:
  - æ”¯æŒå¤šç§æ—¥å¿—ç±»å‹ï¼šDEBUGã€VERBOSEã€AUTHã€CSVã€EMAIL
  - å¯é€šè¿‡é…ç½®å¯ç”¨/ç¦ç”¨è°ƒè¯•æ¨¡å¼
  - ä¾¿äºé—®é¢˜è¯Šæ–­å’Œç³»ç»Ÿç›‘æ§

### 5. ç»Ÿä¸€å‘½ä»¤ç³»ç»Ÿ
- **æ–‡ä»¶**: [`TokenCommandUnified.java`](src/main/java/nety/ys/server/commands/TokenCommandUnified.java)
- **åŠŸèƒ½**: æ•´åˆæ‰€æœ‰ç®¡ç†å‘½ä»¤åˆ°ç»Ÿä¸€çš„å‘½ä»¤æ¥å£
- **ç‰¹æ€§**:
  - æ”¯æŒé…ç½®ç®¡ç†ã€é‚®ä»¶æµ‹è¯•ã€CSVç®¡ç†ç­‰åŠŸèƒ½
  - æä¾›è¯¦ç»†çš„å¸®åŠ©ä¿¡æ¯
  - æ”¹è¿›çš„ç”¨æˆ·äº¤äº’ä½“éªŒ

## ğŸ”§ é…ç½®æ›´æ–°

### æ–°å¢é…ç½®é¡¹
```toml
[csv_logging]
# æ˜¯å¦å¯ç”¨CSVè®°å½•åŠŸèƒ½
enableCSVLogging = false
# CSVæ–‡ä»¶å
csvFileName = "failed_auth_attempts.csv"
# æ˜¯å¦åŒ…å«åœ°ç†ä½ç½®ä¿¡æ¯
includeGeoLocation = true
# æ˜¯å¦è®°å½•è®¤è¯è¶…æ—¶
logTimeoutAttempts = true

[email_alerts]
# æ˜¯å¦å¯ç”¨é‚®ä»¶è­¦æŠ¥
enableEmailAlerts = false
# SMTPæœåŠ¡å™¨é…ç½®
smtpHost = ""
smtpPort = 587
enableSSL = true
smtpUsername = ""
smtpPassword = ""
emailFromAddress = ""
emailToAddress = ""
serverName = "MinecraftæœåŠ¡å™¨"

[logging]
# æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼
debugMode = false
```

## ğŸ“‹ æ–°å¢å‘½ä»¤

### CSVç®¡ç†å‘½ä»¤
- `/csvstatus` - æŸ¥çœ‹CSVè®°å½•çŠ¶æ€
- `/csvenable` - å¯ç”¨CSVè®°å½•
- `/csvdisable` - ç¦ç”¨CSVè®°å½•
- `/csvtest` - æµ‹è¯•CSVè®°å½•åŠŸèƒ½
- `/csvtimeout` - åˆ‡æ¢è¶…æ—¶è®°å½•

### é‚®ä»¶ç®¡ç†å‘½ä»¤
- `/token debug email` - æµ‹è¯•é‚®ä»¶å‘é€åŠŸèƒ½
- `/token set <é…ç½®é¡¹> <å€¼>` - è®¾ç½®é‚®ä»¶é…ç½®

### è°ƒè¯•å‘½ä»¤
- `/debugtest` - æµ‹è¯•è°ƒè¯•æ—¥å¿—åŠŸèƒ½
- `/debugstatus` - æŸ¥çœ‹è°ƒè¯•æ¨¡å¼çŠ¶æ€

## ğŸ› ï¸ æŠ€æœ¯æ”¹è¿›

### 1. å¼‚æ­¥å¤„ç†
- é‚®ä»¶å‘é€ä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹
- IPåœ°ç†ä½ç½®æŸ¥è¯¢æ”¯æŒé‡è¯•æœºåˆ¶
- CSVæ–‡ä»¶å†™å…¥ä½¿ç”¨æ–‡ä»¶é”ç¡®ä¿çº¿ç¨‹å®‰å…¨

### 2. é”™è¯¯å¤„ç†
- å¢å¼ºäº†ç½‘ç»œè¯·æ±‚çš„é”™è¯¯å¤„ç†
- æ·»åŠ äº†è¯¦ç»†çš„å¼‚å¸¸æ—¥å¿—è®°å½•
- æä¾›äº†ä¼˜é›…çš„é™çº§æœºåˆ¶

### 3. æ€§èƒ½ä¼˜åŒ–
- å‡å°‘äº†ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚
- ä¼˜åŒ–äº†æ—¥å¿—è¾“å‡ºæ ¼å¼
- æ”¹è¿›äº†å†…å­˜ä½¿ç”¨æ•ˆç‡

## ğŸ“Š æ–‡æ¡£æ›´æ–°

### æ–°å¢æ–‡æ¡£
- [`Email_Alert_Configuration_Guide.md`](Email_Alert_Configuration_Guide.md) - é‚®ä»¶è­¦æŠ¥é…ç½®æŒ‡å—
- [`EMAIL_TROUBLESHOOTING.md`](EMAIL_TROUBLESHOOTING.md) - é‚®ä»¶åŠŸèƒ½æ•…éšœæ’é™¤
- [`CSV_LOGGING_FEATURE.md`](CSV_LOGGING_FEATURE.md) - CSVæ—¥å¿—åŠŸèƒ½è¯´æ˜
- [`DEBUG_LOGGING_GUIDE.md`](DEBUG_LOGGING_GUIDE.md) - è°ƒè¯•æ—¥å¿—æŒ‡å—

### æ›´æ–°æ–‡æ¡£
- [`COMMAND_REFERENCE.md`](COMMAND_REFERENCE.md) - æ›´æ–°äº†å‘½ä»¤å‚è€ƒ
- [`README.md`](README.md) - æ›´æ–°äº†åŠŸèƒ½è¯´æ˜å’Œé…ç½®æŒ‡å—

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **é‚®ä»¶å‘é€å¤±è´¥**: æ£€æŸ¥SMTPé…ç½®å’Œç½‘ç»œè¿æ¥
2. **åœ°ç†ä½ç½®è·å–å¤±è´¥**: ç¡®è®¤ç½‘ç»œè¿æ¥å’ŒAPIå¯ç”¨æ€§
3. **CSVæ–‡ä»¶å†™å…¥å¤±è´¥**: æ£€æŸ¥æ–‡ä»¶æƒé™å’Œç£ç›˜ç©ºé—´
4. **è°ƒè¯•æ—¥å¿—ä¸æ˜¾ç¤º**: ç¡®è®¤debugModeé…ç½®ä¸ºtrue

### è°ƒè¯•æŠ€å·§
- å¯ç”¨è°ƒè¯•æ¨¡å¼è·å–è¯¦ç»†æ—¥å¿—
- ä½¿ç”¨æµ‹è¯•å‘½ä»¤éªŒè¯åŠŸèƒ½
- æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•æ­£ç¡®æ€§

## ğŸ“ˆ ç‰ˆæœ¬å¯¹æ¯”

| åŠŸèƒ½ | v1.0.0 | v1.1.5 |
|------|--------|--------|
| é‚®ä»¶è­¦æŠ¥ | âŒ | âœ… |
| IPåœ°ç†ä½ç½® | âŒ | âœ… |
| CSVæ—¥å¿—è®°å½• | âŒ | âœ… |
| è°ƒè¯•æ—¥å¿—ç³»ç»Ÿ | âŒ | âœ… |
| ç»Ÿä¸€å‘½ä»¤ç³»ç»Ÿ | âŒ | âœ… |
| è®¤è¯æ ¸å¿ƒåŠŸèƒ½ | âœ… | âœ… |
| çº¦æŸç³»ç»Ÿ | âœ… | âœ… |

## ğŸ¯ æ€»ç»“

v1.1.5ç‰ˆæœ¬å¤§å¹…å¢å¼ºäº†Tokenè®¤è¯ç³»ç»Ÿçš„ç›‘æ§å’Œè°ƒè¯•èƒ½åŠ›ï¼Œæä¾›äº†ï¼š

1. **æ›´å¼ºçš„å®‰å…¨ç›‘æ§**: é‚®ä»¶è­¦æŠ¥å’ŒIPåœ°ç†ä½ç½®è¿½è¸ª
2. **æ›´å¥½çš„æ•°æ®è®°å½•**: CSVæ—¥å¿—è®°å½•å’Œè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
3. **æ›´ä¾¿æ·çš„ç®¡ç†**: ç»Ÿä¸€çš„å‘½ä»¤ç³»ç»Ÿå’Œé…ç½®ç®¡ç†
4. **æ›´é«˜çš„å¯é æ€§**: å¼‚æ­¥å¤„ç†å’Œé”™è¯¯å¤„ç†æ”¹è¿›

è¿™ä¸ªç‰ˆæœ¬ä¸ºæœåŠ¡å™¨ç®¡ç†å‘˜æä¾›äº†å…¨é¢çš„è®¤è¯ç›‘æ§å·¥å…·ï¼Œä½¿å®‰å…¨äº‹ä»¶èƒ½å¤Ÿè¢«åŠæ—¶å‘ç°å’Œå¤„ç†ï¼ŒåŒæ—¶ä¿æŒäº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚

---

**å‘å¸ƒæ—¥æœŸ**: 2025å¹´12æœˆ7æ—¥  
**å…¼å®¹ç‰ˆæœ¬**: Minecraft 1.19.2  
**æ‰€éœ€ä¾èµ–**: Fabric Loader >=0.14.21, Fabric API >=0.76.0+1.19.2, Java >=17